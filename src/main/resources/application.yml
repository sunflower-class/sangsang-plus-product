spring:
  application:
    name: product-service
  
  datasource:
    url: jdbc:postgresql://${DB_HOST:sangsangplus-postgre-server.postgres.database.azure.com}:${DB_PORT:5432}/${DB_NAME:product_db}?sslmode=require
    username: ${DB_USERNAME:sangsangplus_admin}
    password: ${DB_PASSWORD:ekdma1443!}
    driver-class-name: org.postgresql.Driver
    hikari:
      connection-timeout: 30000
      maximum-pool-size: 10
  
  jpa:
    hibernate:
      ddl-auto: update
    properties:
      hibernate:
        dialect: org.hibernate.dialect.PostgreSQLDialect
        format_sql: true
    show-sql: false
  
azure:
  eventhub:
    # 상품 이벤트 발행용
    producer:
      connection-string: ${PRODUCT_EVENTHUB_CONNECTION_STRING:Endpoint=sb://sangsangplus-eventhubs.servicebus.windows.net/;SharedAccessKeyName=ProductProducerKey;SharedAccessKey=/vg3jpxHFMdRPpuSGlya7nHBphlbzCRwt+AEhFV6Q2M=;EntityPath=product-events}
      name: product-events
    # 유저 이벤트 수신용
    consumer:
      connection-string: ${USER_EVENTHUB_CONNECTION_STRING:Endpoint=sb://sangsangplus-eventhubs.servicebus.windows.net/;SharedAccessKeyName=UserConsumerKey;SharedAccessKey=ZPRtTjEQZ9Wi4VoKiyNeViYVjvMvtBHdG+AEhCTFjGI=;EntityPath=user-events}
      name: user-events
      consumer-group: product-service-group
  
  cache:
    type: simple
    cache-names: products, categories
  

server:
  port: 8082

# API Documentation Configuration
springdoc:
  api-docs:
    path: /v3/api-docs
  swagger-ui:
    path: /swagger-ui.html
    disable-swagger-default-url: true
    display-request-duration: true
    groups-order: DESC
    operationsSorter: method
    tags-sorter: alpha
  show-actuator: false


management:
  endpoints:
    web:
      exposure:
        include: health,info,metrics,prometheus
  health:
    circuitbreakers:
      enabled: true

logging:
  level:
    com.sangsangplus.productservice: DEBUG
    com.azure.messaging.eventhubs: INFO

# Saga Configuration
saga:
  timeout: 30s
  retry:
    max-attempts: 3
    backoff: 2s

# CQRS Configuration
cqrs:
  event-store:
    enabled: true
    retention-days: 30